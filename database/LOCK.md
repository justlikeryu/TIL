# Lock
> [트랜잭션](트랜잭션.md) 처리의 순차성을 보장하여 다수 프로세스가 자원에 안전하게 접근할 수 있도록 하는 것


## Lock의 목적
- 효과적인 DBMS 사용
- 데이터의 일관성과 무결성 유지

## Lock의 특성
- 획득(Acquire): Lock을 획득해 자원에 접근한다.
- 해제(Release): 자원 사용이 끝나면 Lock을 해제하여 다른 프로세스가 접근할 수 있게 한다.

## Lock의 종류
- 공유(Shared/Read Lock)
  - 데이터를 읽을 때 사용되는 Lock
  - 특징
    - 공유 Lock끼리는 동시에 접근 가능하다 => 여러 사용자가 하나의 데이터를 읽을 수 있다.
    - 공유 Lock이 설정된 데이터에는 베타 Lock을 사용할 수 없다.
- 베타(Exclusive/Write Lock)
  - 데이터를 변경할 때 사용하는 Lock
  - 특징
    - Lock이 해제될 때까지 다른 트랜잭션은 해당 리소스에 접근할 수 없다.
    - 다른 트랜잭션이 수행되고 있는 데이터에 접근하여 Lock을 설정할 수 없다.

## 블로킹(Blocking)
> 프로세스가 다른 작업을 수행하는 동안 필요한 자원을 기다리는 상태

### 블로킹 발생 상황
- 자원 점유: 다른 프로세스가 필요한 자원을 이미 점유하고 있을 때
- 동기화: Lock 또는 Mutex와 같은 동기화 매커니즘을 사용할 때

## 교착 상태(Dead Lock)
> 둘 이상의 프로세스가 서로가 가진 자원을 기다리며 서로 하염없이 기다리는 상태

### 교착 상태 발생 상황
- 상호 배제(Mutual Exclusion): 자원은 한 번에 하나의 프로세스만 사용할 수 있다.
- 비선점(No Premption): 이미 할당된 자원은 빼앗을 수 없다.
- 점유와 대기(Hold and Wait): 자원을 하나 이상 보유하고 대기하는 프로세스가 존재해야 한다.
- 환형 대기(Ciruclar Wait): 대기 프로세스는 순환 형태로 자원을 대기해야 한다.

### 교착 상태 해결 방법
- 예방(Prevention): 교착 상태가 발생하지 않게 사전에 제어하는 기법으로 자원의 낭비가 가장 심하다.
- 회피(Avoidance): 교착 상태가 발생할 가능성을 배제하지 않고 발생하면 회피하는 기법
- 발견(Detection): 교착 상태가 발생했는지 점검하여 교착 상태에 있는 프로세스와 자원을 발견하는 기법
- 회복(Recovery): 교착 상태를 일으킨 프로세스를 종료하거나 교착 상태의 프로세스에 할당된 자원을 선점하여 회복하는 기법